var MagneticApp=(()=>{var A=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var B=Object.getOwnPropertyNames;var F=Object.prototype.hasOwnProperty;var O=(t,n)=>{for(var i in n)A(t,i,{get:n[i],enumerable:!0})},E=(t,n,i,r)=>{if(n&&typeof n=="object"||typeof n=="function")for(let o of B(n))!F.call(t,o)&&o!==i&&A(t,o,{get:()=>n[o],enumerable:!(r=_(n,o))||r.enumerable});return t};var V=t=>E(A({},"__esModule",{value:!0}),t);var K={};O(K,{reduce:()=>G,render:()=>L});function H(t,n){let i,r=[];if(t.path==="*")i=".*";else{let s=t.path.split("/").filter(Boolean).map(p=>p.startsWith(":")?(r.push(p.slice(1)),"([^/]+)"):p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));i=s.length?s.join("/"):""}let o=n+(i?"/"+i:""),d=t.children&&t.children.length>0?`^${o||""}(?:/|$)`:`^${o||"/"}$`,u=(t.children||[]).map(l=>H(l,o));return{def:t,regex:new RegExp(d),paramNames:r,children:u}}function x(t){let n=t.map(r=>H(r,""));function i(r,o,a,d,u){let l=o==="/"?"/":o.replace(/\/+$/,"");for(let s of r){let p=l.match(s.regex);if(!p)continue;let h={...a};for(let g=0;g<s.paramNames.length;g++)h[s.paramNames[g]]=decodeURIComponent(p[g+1]);let b=s.def.layout?[...d,s.def.layout]:[...d],y=s.def.guard?[...u,s.def.guard]:[...u];if(s.def.redirect)return{page:()=>({tag:"div"}),params:h,layouts:b,guards:y,redirect:s.def.redirect};if(s.children.length>0){let g=i(s.children,l,h,b,y);if(g)return g}if(s.def.page)return{page:s.def.page,params:h,layouts:b,guards:y}}return null}return{routes:t,match(r){return i(n,r,{},[],[])},resolve(r,o){let a=this.match(r);if(!a)return null;for(let l of a.guards){let s=l({path:r,params:a.params});if(s===!0)continue;return{kind:"redirect",to:typeof s=="string"?s:s.redirect}}if(a.redirect)return{kind:"redirect",to:a.redirect};let d={params:a.params,...o},u=a.page(d);for(let l=a.layouts.length-1;l>=0;l--)u=a.layouts[l]({children:u,params:a.params,path:r});return{kind:"render",dom:u}}}}function m(t){let{href:n,children:i,...r}=t;return e("a",{...r,href:n,onClick:`navigate:${n}`,children:i},void 0)}function f({children:t}){return{tag:"magnetic:head",children:v(t)}}var R={onClick:"click",onSubmit:"submit",onInput:"input",onChange:"change",onFocus:"focus",onBlur:"blur",onKeyDown:"keydown",onKeyUp:"keyup",onScroll:"scroll"};function v(t){if(t==null||t===!1||t===!0)return[];if(typeof t=="string"||typeof t=="number")return[{tag:"span",text:String(t)}];if(Array.isArray(t)){let n=[];for(let i of t)n.push(...v(i));return n}return[t]}function e(t,n,i){let{children:r,...o}=n;if(typeof t=="function")return t({...o,key:i,children:r});let a={tag:t};i!=null&&(a.key=String(i));let d={},u={};for(let[l,s]of Object.entries(o))if(!(s==null||s===!1)){if(R[l]){u[R[l]]=String(s);continue}if(l==="class"||l==="className"){let p=String(s).trim();p&&(d.class=p);continue}if(s===!0){d[l]="";continue}d[l]=String(s)}if(Object.keys(d).length&&(a.attrs=d),Object.keys(u).length&&(a.events=u),r!=null)if(typeof r=="string"||typeof r=="number")a.text=String(r);else{let l=v(r);l.length===1&&l[0].tag==="span"&&l[0].text!=null&&!l[0].key?a.text=l[0].text:l.length>0&&(a.children=l)}return a}var c=e;function N({params:t}){return c("div",{class:"about-page",children:[c(f,{children:[e("title",{children:"About | Magnetic Task Board"}),e("meta",{name:"description",content:"Learn about the Magnetic framework \u2014 server-driven UI with TSX components"})]}),c("nav",{class:"topnav",children:[e(m,{href:"/",class:"nav-link",children:"Tasks"}),e(m,{href:"/about",class:"nav-link active",children:"About"})]},"nav"),c("div",{class:"content",children:[e("h1",{children:"About Magnetic"},"h"),e("p",{children:"A server-driven UI framework where the server owns all state."},"p1"),e("p",{children:"Components are pure TSX functions that produce JSON DOM descriptors."},"p2"),e("p",{children:"The client runtime is 2KB (Brotli) \u2014 no framework, no hydration, no virtual DOM."},"p3"),e("h2",{children:"Architecture"},"h2"),c("ul",{children:[e("li",{children:"TSX components \u2192 JSON DOM snapshots"},"l1"),e("li",{children:"POST \u2192 response (single round-trip)"},"l2"),e("li",{children:"SSE broadcast for multi-client sync"},"l3"),e("li",{children:"WASM transport for dedup (1,129 bytes)"},"l4"),e("li",{children:"Deploys as a single JS file to V8 isolates"},"l5")]},"list"),e("p",{children:e(m,{href:"/",children:"\u2190 Back to tasks"})},"p4")]},"content")]},"about")}function k({params:t}){return c("div",{class:"not-found",children:[e(f,{children:e("title",{children:"404 Not Found | Magnetic Task Board"})}),e("h1",{children:"404"},"h"),e("p",{children:"Page not found."},"p"),e("p",{children:e(m,{href:"/",children:"\u2190 Back to tasks"})},"link")]},"404")}function D({task:t}){return c("div",{class:`task-card ${t.completedClass}`,children:[e("button",{onClick:`toggle_${t.id}`,class:"check",children:t.checkmark},`chk-${t.id}`),e("span",{class:"task-title",children:t.title},`tt-${t.id}`),e("button",{onClick:`delete_${t.id}`,class:"delete",children:"\xD7"},`del-${t.id}`)]},`task-${t.id}`)}function S(){return c("form",{class:"add-form",onSubmit:"add_task",children:[e("input",{type:"text",name:"title",placeholder:"Add a task...",autocomplete:"off"},"add-input"),e("button",{type:"submit",children:"Add"},"add-btn")]},"add-form")}function T({allClass:t,activeClass:n,doneClass:i}){return c("div",{class:"filters",children:[e("button",{onClick:"filter_all",class:`filter-btn ${t}`,children:"All"},"f-all"),e("button",{onClick:"filter_active",class:`filter-btn ${n}`,children:"Active"},"f-active"),e("button",{onClick:"filter_done",class:`filter-btn ${i}`,children:"Done"},"f-done")]},"filters")}function M(t){return c("div",{class:"task-board",children:[c(f,{children:[e("title",{children:`Tasks (${t.taskCount}) | Magnetic Task Board`}),e("meta",{name:"description",content:"A server-driven task board built with Magnetic TSX components"}),e("meta",{property:"og:title",content:"Magnetic Task Board"})]}),c("nav",{class:"topnav",children:[e(m,{href:"/",class:"nav-link active",children:"Tasks"}),e(m,{href:"/about",class:"nav-link",children:"About"})]},"nav"),c("div",{class:"header",children:[e("h1",{children:"Task Board"},"title"),e("p",{class:"subtitle",children:t.taskCount},"subtitle")]},"header"),e(S,{}),e(T,{allClass:t.filterAllClass,activeClass:t.filterActiveClass,doneClass:t.filterDoneClass}),e("div",{class:"task-list",children:t.visibleTasks.map(n=>e(D,{task:n}))},"task-list"),t.isEmpty&&e("p",{class:"empty",children:t.emptyMessage},"empty")]},"board")}function $(){return{tasks:[{id:1,title:"Build magnetic components",completed:!0},{id:2,title:"Wire up WASM transport layer",completed:!0},{id:3,title:"Implement POST response architecture",completed:!1},{id:4,title:"Add routing support",completed:!1},{id:5,title:"Deploy to edge",completed:!1}],filter:"all",nextId:6}}function P(t,n,i){switch(n){case"add_task":{let r=i?.title?.trim();return r?{...t,tasks:[...t.tasks,{id:t.nextId,title:r,completed:!1}],nextId:t.nextId+1}:t}case"delete_task":{let r=parseInt(n.split("_").pop()||i?.id,10);return{...t,tasks:t.tasks.filter(o=>o.id!==r)}}case"filter_all":return{...t,filter:"all"};case"filter_active":return{...t,filter:"active"};case"filter_done":return{...t,filter:"done"};default:{let r=n.match(/^toggle_(\d+)$/);if(r){let a=parseInt(r[1],10);return{...t,tasks:t.tasks.map(d=>d.id===a?{...d,completed:!d.completed}:d)}}let o=n.match(/^delete_(\d+)$/);if(o){let a=parseInt(o[1],10);return{...t,tasks:t.tasks.filter(d=>d.id!==a)}}return t}}}function I(t){let n=t.tasks.filter(o=>t.filter==="active"?!o.completed:t.filter==="done"?o.completed:!0).map(o=>({...o,completedClass:o.completed?"completed":"",checkmark:o.completed?"\u2713":"\u25CB"})),i=t.tasks.filter(o=>!o.completed).length,r=t.tasks.filter(o=>o.completed).length;return{...t,visibleTasks:n,taskCount:`${i} active, ${r} done`,filterAllClass:t.filter==="all"?"active":"",filterActiveClass:t.filter==="active"?"active":"",filterDoneClass:t.filter==="done"?"active":"",isEmpty:n.length===0,emptyMessage:t.filter==="active"?"All tasks completed!":t.filter==="done"?"No completed tasks yet":"No tasks yet. Add one above!"}}var w=x([{path:"/about",page:N},{path:"/",page:M},{path:"*",page:k}]),C=$();function L(t){let n=I(C),i=w.resolve(t,n);if(!i)return k({params:{}});if(i.kind==="redirect"){let r=w.resolve(i.to,n);return r&&r.kind==="render"?r.dom:k({params:{}})}return i.dom}function G(t){let{action:n,payload:i={},path:r="/"}=t;return C=P(C,n,i),L(r)}return V(K);})();
