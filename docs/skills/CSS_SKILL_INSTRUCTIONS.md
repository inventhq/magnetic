# Instructions for CSS Coder: Create a Claude Skill for @magneticjs/css

## What to Create

A Claude Skill document (similar to `magnetic-app-development.md`) that teaches AI agents how to use the `@magneticjs/css` framework for styling Magnetic apps. This is the CSS/design counterpart to the app development skill.

## What the Skill Should Cover

### 1. Design Tokens (design.json)

- Full schema of `design.json`: `css` mode, `theme.colors`, `theme.spacing`, `theme.radius`, `theme.typography`, `theme.shadows`, `theme.breakpoints`
- How each token maps to CSS custom properties (`--m-primary`, `--m-surface`, etc.)
- How to create dark/light themes
- The `"css"` field: `"all"` vs `"pages"` vs `"used"` — when to use each

### 2. Complete Utility Class Reference

Document ALL utility classes generated by `generateUtilities()` in `src/utilities.ts`. The count depends on the number of tokens in `design.json` (colors, spacing, etc). Organize by category:

- **Layout primitives**: `stack`, `row`, `cluster`, `center`, `wrap`, `no-wrap`, `grid-auto`, `grid-2`..`grid-6`, `container`
- **Flexbox**: `grow`, `grow-0`, `shrink`, `shrink-0`, `items-start`, `items-center`, `items-end`, `items-stretch`, `items-baseline`, `justify-start`, `justify-center`, `justify-end`, `justify-between`, `justify-around`, `justify-evenly`, `self-auto`, `self-start`, `self-center`, `self-end`, `self-stretch`
- **Spacing**: `gap-{size}`, `p-{size}`, `px-{size}`, `py-{size}`, `pt-{size}`, `pr-{size}`, `pb-{size}`, `pl-{size}`, `m-{size}`, `mx-{size}`, `my-{size}`, `mt-{size}`, `mr-{size}`, `mb-{size}`, `ml-{size}`, `mx-auto`
- **Colors**: `fg-{color}`, `bg-{color}`, `border-{color}` for every color in the theme
- **Typography**: `text-{size}` (fluid clamp() for sizes ≥ lg), `font-sans`, `font-mono`, `thin`, `light`, `normal`, `medium`, `semibold`, `bold`, `extrabold`, `italic`, `not-italic`, `leading-{tight|normal|relaxed}`, `tracking-tighter`, `tracking-tight`, `tracking-normal`, `tracking-wide`, `tracking-wider`, `uppercase`, `lowercase`, `capitalize`, `normal-case`, `text-left`, `text-center`, `text-right`, `text-justify`, `underline`, `line-through`, `no-underline`, `truncate`, `break-words`
- **Borders**: `border`, `border-t`, `border-r`, `border-b`, `border-l`, `border-none`, `round-{sm|md|lg|full}`, `round-none`
- **Shadows**: `shadow-{sm|md|lg|xl}`, `shadow-none`
- **Sizing**: `w-full`, `w-screen`, `w-auto`, `h-full`, `h-screen`, `h-auto`, `min-h-screen`, `min-h-full`, `min-w-0`, `max-w-{sm|md|lg|xl}`, `max-w-prose`, `max-w-none`
- **Aspect ratio**: `aspect-auto`, `aspect-square`, `aspect-video`, `aspect-photo`, `aspect-wide`
- **Display**: `hidden`, `block`, `inline`, `inline-block`, `flex`, `inline-flex`, `grid`, `inline-grid`, `contents`
- **Position**: `relative`, `absolute`, `fixed`, `sticky`, `static`, `inset-0`, `top-0`, `right-0`, `bottom-0`, `left-0`
- **Z-index**: `z-0`, `z-10`, `z-20`, `z-30`, `z-40`, `z-50`, `z-auto`
- **Overflow**: `overflow-hidden`, `overflow-auto`, `overflow-scroll`, `overflow-visible`, `overflow-x-auto`, `overflow-y-auto`, `overflow-x-hidden`, `overflow-y-hidden`
- **Opacity**: `opacity-0`, `opacity-25`, `opacity-50`, `opacity-75`, `opacity-100`
- **Cursor**: `cursor-pointer`, `cursor-default`, `cursor-not-allowed`, `cursor-wait`, `cursor-text`, `cursor-grab`
- **Interactions**: `pointer-events-none`, `pointer-events-auto`, `select-none`, `select-text`, `select-all`, `select-auto`
- **Transitions**: `transition`, `transition-colors`, `transition-opacity`, `transition-shadow`, `transition-transform`, `transition-none`
- **Accessibility**: `sr-only`, `not-sr-only`
- **Responsive prefixes**: `sm:`, `md:`, `lg:`, `xl:` (e.g., `md:row`, `lg:text-xl`, `sm:hidden`)

### 3. Theme CSS Custom Properties

Document the CSS custom properties generated by `compileTheme()`:
- `--m-{color}` for each color
- `--m-space-{size}` for each spacing value
- `--m-radius-{size}` for each radius
- `--m-font-sans`, `--m-font-mono`
- `--m-text-{size}` for each typography size
- `--m-shadow-{size}` for each shadow

### 4. How to Write Custom CSS

Show how `public/style.css` works alongside utility classes:
- Use `var(--m-*)` tokens for consistency with the theme
- Only write custom CSS for `:hover`, `:focus`, `:active`, `::placeholder`, media queries, animations
- Custom CSS is merged with generated CSS in the inline `<style>` block

### 5. CSS Architecture in Magnetic

Explain how the CSS pipeline works:
- `design.json` → `@magneticjs/css` generates theme + utility CSS at build time
- CSS is injected as inline `<style>` in the SSR HTML (no external CSS file request)
- `public/style.css` is merged alongside
- No client-side CSS-in-JS, no runtime style injection
- SSE updates use the same CSS (already in the page)

### 6. Patterns and Examples

- Dark theme setup
- Card component with utility classes
- Responsive layout (`stack` on mobile, `row` on desktop via `md:row`)
- Form styling with custom focus states
- Active/inactive state toggling via dynamic classes from `toViewModel()`
- Full page layout pattern: `stack items-center p-xl min-h-screen` wrapper

### 7. Comparison with Tailwind

Quick mapping for developers coming from Tailwind:
| Tailwind | Magnetic CSS |
|----------|-------------|
| `flex flex-col` | `stack` |
| `flex flex-row` | `row` |
| `flex flex-wrap items-center` | `cluster` |
| `flex items-center justify-center` | `center` |
| `grid grid-cols-3` | `grid-3` |
| `grid grid-cols-[repeat(auto-fit,...)]` | `grid-auto` |
| `container mx-auto px-4` | `container` |
| `items-center` | `items-center` |
| `justify-between` | `justify-between` |
| `gap-4` | `gap-md` |
| `p-4` | `p-md` |
| `px-4` | `px-md` |
| `mx-auto` | `mx-auto` |
| `mt-4` | `mt-md` |
| `text-blue-500` | `fg-primary` |
| `bg-gray-900` | `bg-surface` |
| `border border-gray-700` | `border` (uses `--m-border` color) |
| `rounded-lg` | `round-lg` |
| `shadow-md` | `shadow-md` |
| `text-sm` | `text-sm` |
| `text-2xl` | `text-2xl` (fluid clamp() for lg+) |
| `font-bold` | `bold` |
| `font-semibold` | `semibold` |
| `italic` | `italic` |
| `line-through` | `line-through` |
| `text-center` | `text-center` |
| `uppercase` | `uppercase` |
| `truncate` | `truncate` |
| `leading-relaxed` | `leading-relaxed` |
| `w-full` | `w-full` |
| `min-h-screen` | `min-h-screen` |
| `max-w-prose` | `max-w-prose` |
| `hidden` | `hidden` |
| `block` | `block` |
| `relative` | `relative` |
| `absolute` | `absolute` |
| `z-50` | `z-50` |
| `overflow-hidden` | `overflow-hidden` |
| `opacity-50` | `opacity-50` |
| `cursor-pointer` | `cursor-pointer` |
| `transition` | `transition` |
| `transition-colors` | `transition-colors` |
| `sr-only` | `sr-only` |
| `flex-grow` | `grow` |
| `flex-shrink-0` | `shrink-0` |
| `aspect-video` | `aspect-video` |
| `sm:flex-row` | `sm:row` |
| `md:grid-cols-3` | `md:grid-3` |
| `lg:text-4xl` | `lg:text-4xl` |
| `hover:bg-blue-600` | Use `style.css`: `.btn:hover { ... }` |
| `focus:ring-2` | Use `style.css`: `.input:focus { ... }` |
| `dark:bg-gray-900` | Automatic via `[data-theme="dark"]` — no prefix needed |

## Source Files to Reference

- `js/packages/magnetic-css/src/types.ts` — DesignConfig interface
- `js/packages/magnetic-css/src/defaults.ts` — Default theme tokens
- `js/packages/magnetic-css/src/theme.ts` — Theme CSS generator
- `js/packages/magnetic-css/src/reset.ts` — CSS reset
- `js/packages/magnetic-css/src/utilities.ts` — All 305 utility classes
- `js/packages/magnetic-css/src/extract.ts` — CSS extraction modes
- `js/packages/magnetic-css/README.md` — Existing documentation
- `apps/task-board/design.json` — Real-world example
- `apps/task-board/public/style.css` — Custom CSS example (22 lines)
- `apps/task-board/pages/TasksPage.tsx` — Utility classes in use
- `apps/task-board/components/TaskCard.tsx` — Dynamic classes in use

## Output Location

Save the skill as `docs/skills/magnetic-css-styling.md` in the repo.

## Tone

Technical, concise, example-heavy. Written as instructions for an AI agent, not a tutorial for humans. The AI reading this should be able to immediately write correct Magnetic CSS without asking questions.
